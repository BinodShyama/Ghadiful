<html>
<head>
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Typescript UI Controls">
    <meta name="author" content="Syncfusion">
    <link rel="icon" type="image/png" href="~/favicon.png">
    <!-- Bootstrap 5 CSS-->
    @*<link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.css" />*@

    <!-- Core Sneat CSS -->
    <link rel="stylesheet" href="~/assets/vendor/css/core.css" asp-append-version="true" class="template-customizer-core-css" />
    <link rel="stylesheet" href="~/assets/vendor/css/theme-default.css" asp-append-version="true" class="template-customizer-theme-css" />
    <!-- Vendors CSS -->
    <link rel="stylesheet" href="~/assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.css" />
    <link href="https://cdn.syncfusion.com/ej2/21.1.35/bootstrap5.css" rel="stylesheet" />
    <link href="https://cdn.syncfusion.com/ej2/21.2.3/ej2-base/styles/material.css" rel="stylesheet">
    <link href="https://cdn.syncfusion.com/ej2/21.2.3/ej2-buttons/styles/material.css" rel="stylesheet">
    <link href="https://cdn.syncfusion.com/ej2/21.2.3/ej2-lists/styles/material.css" rel="stylesheet">
    <link href="https://cdn.syncfusion.com/ej2/21.2.3/ej2-navigations/styles/material.css" rel="stylesheet">
    <link href="https://cdn.syncfusion.com/ej2/21.2.3/ej2-calendars/styles/material.css" rel="stylesheet">

    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />

    <!-- search bar-->
    <link rel="stylesheet" href="~/lib/autoComplete/autoComplete.02.css">

    @*<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@@tarekraafat/autocomplete.js@10.2.7/dist/css/autoComplete.min.css">*@


    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Public+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&display=swap"
          rel="stylesheet" />

    <link href="~/css/style.css" rel="stylesheet" />
    <script src="~/js/ej2.min.js" type="text/javascript"></script>
    <script src="~/assets/vendor/js/helpers.js" type="text/javascript"></script>

    
</head>
<body>
    <!-- Layout wrapper -->
    <div class="layout-wrapper layout-content-navbar">
        <div class="layout-container" style="padding-left:13rem;">
            <!-- sidebar element declaration -->
            @* <div class="main-header" id="header-section">
            <ul class="header-list">
            <li class="float-left header-style icon-menu" id="hamburger"></li>
            <li class="float-left header-style nav-pane"><b>Gadhiful</b></li>
            <li class="header-style float-right support border-left"><b>Support</b></li>
            </ul>
            </div>*@
            <!-- Menu -->
            <partial name="_Sidebar" />
            <!-- / Menu -->
            <!-- Layout container -->
            <div class="layout-page">
                <!-- Navbar -->

                <nav class="layout-navbar container-xxl navbar navbar-expand-xl navbar-detached align-items-center bg-navbar-theme"
                     id="layout-navbar">


                    <div class="navbar-nav-right d-flex align-items-center" id="navbar-collapse">
                        <!-- Search -->
                        <div class="navbar-nav align-items-center">
                            <div class="nav-item d-flex align-items-center">
                                <i class="bx bx-search fs-4 lh-0"></i>
                                <input id="searchbar" type="search"
                                       class="form-control border-0 shadow-none"
                                       placeholder="Search..."
                                       aria-label="Search..." />
                            </div>
                        </div>
                        <!-- /Search -->

                        <ul class="navbar-nav flex-row align-items-center ms-auto">


                            <!-- User -->
                            <li class="nav-item navbar-dropdown dropdown-user dropdown">
                                <a class="nav-link dropdown-toggle hide-arrow position-relative" href="javascript:void(0);" data-bs-toggle="dropdown">
                                    <p style="font-size:12px; font-weight:bold; margin-bottom:0px; text-align:right;">@User.Identity.Name</p>
                                    <p style="font-size:12px; color:#999; margin-bottom:0px; text-align:right; line-height:1;">Admin</p>
                                    <span class="material-symbols-outlined" style="position:absolute; right:-20px;top:14px;">
                                        expand_more
                                    </span>
                                </a>
                                <ul class="dropdown-menu dropdown-menu-end">
                                    <li>
                                        <a class="dropdown-item" href="#">
                                            <div class="d-flex">
                                                <div class="flex-shrink-0 me-3">
                                                    <div class="avatar avatar-online">
                                                        <img src="~/assets/img/avatars/1.png" alt class="w-px-40 h-auto rounded-circle" />
                                                    </div>
                                                </div>
                                                <div class="flex-grow-1">
                                                    <span class="fw-semibold d-block">@User.Identity.Name</span>
                                                    <small class="text-muted">Admin</small>
                                                </div>
                                            </div>
                                        </a>
                                    </li>
                                    <li>
                                        <div class="dropdown-divider"></div>
                                    </li>
                                    <li>
                                        <a class="dropdown-item" href="/employee/index/1">
                                            <i class="bx bx-user me-2"></i>
                                            <span class="align-middle">My Profile</span>
                                        </a>
                                    </li>
                                    @*   <li>
                                    <a class="dropdown-item" href="#">
                                    <i class="bx bx-cog me-2"></i>
                                    <span class="align-middle">Settings</span>
                                    </a>
                                    </li>*@
                                    <li>
                                        <a class="dropdown-item" href="/NoticeBoard">
                                            <span class="d-flex align-items-center align-middle">
                                                <i class="flex-shrink-0 bx bx-credit-card me-2"></i>
                                                <span class="flex-grow-1 align-middle">Notice Board</span>
                                                <span class="flex-shrink-0 badge badge-center rounded-pill bg-danger w-px-20 h-px-20">3</span>
                                            </span>
                                        </a>
                                    </li>
                                    <li>
                                        <div class="dropdown-divider"></div>
                                    </li>
                                    <li>
                                        <a class="dropdown-item" href="/account/logout">
                                            <i class="bx bx-power-off me-2"></i>
                                            <span class="align-middle">Log Out</span>
                                        </a>
                                    </li>
                                </ul>
                            </li>
                            <!--/ User -->
                        </ul>
                    </div>
                </nav>

                <!-- / Navbar -->
                <!-- Content wrapper -->
                <div class="flex-grow-1 px-4">
                    @RenderBody()
                </div>
            </div>


        </div>
    </div>

    <script id="menuTemplate" type="text/x-template">
        <div>
            <a href="${link}">${nodeText}</a>
            </div>
    </script>
    <script>
        var ele = document.getElementById('container');
        if (ele) {
            ele.style.visibility = "visible";
        }
    </script>
  
    <!-- Core JS -->
    <!-- build:js assets/vendor/js/core.js -->
    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <partial name="_ValidationScriptsPartial" />
    <script src="~/assets/vendor/libs/popper/popper.js"></script>
    <script src="~/lib/bootstrap/dist/js/bootstrap.min.js"></script>
    <script src="~/assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.js"></script>
    <script src="~/lib/moment.js/moment.min.js"></script>
    <script src="~/assets/vendor/js/menu.js"></script>

    <!-- endbuild -->
    <!-- Vendors JS -->
    @*<script src="~/assets/vendor/libs/apex-charts/apexcharts.js"></script>*@

    <!-- Main JS -->
    <script src="~/assets/js/main.js"></script>

    <!-- Search bar-->
    <script src="https://cdn.jsdelivr.net/npm/@@tarekraafat/autocomplete.js@10.2.7/dist/autoComplete.min.js"></script>
    <script type="text/javascript">
        function formatDate(date) {
            const [year, month, day] = [
                Math.floor(date / 10000),
                Math.floor((date % 10000) / 100),
                date % 100
            ];

            return `${year.toString().padStart(4, '0')}/${month.toString().padStart(2, '0')}/${day.toString().padStart(2, '0')}`;
        }
        const autoCompleteJS = new autoComplete({
            selector: "#searchbar",
            placeHolder: "Search an employee",
            data: {
                src: async (query) => {
                    try {
                        if (query !== undefined && query.replace(/ /g, "").length >= 3) {
                            const source = await fetch(`/employee/search?query=${query}`);
                            const data = await source.json();
                            return data;
                        }
                    } catch (error) {
                        return error;
                    }
                },
                keys: ["name", "deviceenrollnumber"],
                cache: false,
            },
            resultItem: {
                highlight: false
            },
            events: {
                input: {
                    selection: (event) => {
                        const selectedItem = event.detail.selection.value;
                        window.location.href = `/employee/index/${selectedItem.id}`;
                    }
                }
            }
        });
    </script>
    <partial name="_Schedular" />
    @await RenderSectionAsync("Scripts", required: false)
    <ejs-scripts></ejs-scripts>
</body>
</html>